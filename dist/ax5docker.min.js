"use strict";!function(){var e=ax5.ui,n=ax5.util;e.addClass({className:"docker",version:"1.3.90"},function(){var e=function(){var e=this,a=this,t=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."}},this.xvar={},this.menu=null,this.panels=[],this.panelId=0,this.modules={},t=this.config;var l=function(){return e.panelId++},r={init:function(e,n){e.$element.html(n.name)},active:function(e,n){},deactive:function(e,n){},destroy:function(e,n){}},s=function(e,n){var a=[];return e&&"undefined"!=typeof e.panelPath&&a.push(e.panelPath),a.push("panels["+(n||0)+"]"),a.join(".")},i=function(a){var t=[],l=n.isArray(a)?[].concat(a):[].concat(a.split(/[\.\[\]]/g));l.forEach(function(e){""!==e&&t.push('["'+e.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+t.join("")+";").call(e)}catch(r){return}},o=function(a,t){var l=[],r=n.isArray(a)?[].concat(a):[].concat(a.split(/[\.\[\]]/g));return r.forEach(function(e){""!==e&&l.push('["'+e.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+l.join("")+" = val;").call(e,t)},d=function(e){var n=void 0,a=e.originalEvent?e.originalEvent:e;return n="changedTouches"in a?a.changedTouches[0]:a,{clientX:n.pageX,clientY:n.pageY}},u=function(a,l){var s=jQuery.extend(a.moduleState,{name:a.name}),i={$element:a.$item},d=void 0,u={init:function(){a.builded=!0,d=a.moduleName in e.modules&&"init"in e.modules[a.moduleName]?e.modules[a.moduleName]:r,d.init(i,s)},active:function(){a.active=!0,a.$label.addClass("active"),a.$item.addClass("active");var n=a.$label.parent();n.get(0)&&n.get(0).clientWidth!==n.get(0).scrollWidth&&n.animate({scrollLeft:a.$label.position().left},300),d=a.moduleName in e.modules&&"active"in e.modules[a.moduleName]?e.modules[a.moduleName]:r,d.active(i,s),n=null},deactive:function(){a.active=!1,a.$label.removeClass("active"),a.$item.removeClass("active"),d=a.moduleName in e.modules&&"deactive"in e.modules[a.moduleName]?e.modules[a.moduleName]:r,d.deactive(i,s)},destroy:function(){d=a.moduleName in e.modules&&"destroy"in e.modules[a.moduleName]?e.modules[a.moduleName]:r,d.destroy(i,s),o(a.panelPath,null),y()}},p={panel:a,controlType:l},c=function(){u[l](),d=null,n.isFunction(t.control.after)&&t.control.after.call(p,p)};u[l]&&(n.isFunction(t.control.before)?t.control.before.call(p,p,function(){c()}):c())},p=function(){var r={stack:function(e,a,l,i){var o=void 0,d=-1;l.panelPath=s(a,i),o=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+l.panelPath+'" style="flex-grow: '+(l.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-more="">'+t.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),e.append(o),n.isArray(l.panels)&&(l.panels.forEach(function(e,n){e.active&&(d=n)}),d===-1&&(d=0),l.panels[d].active=!0,l.panels.forEach(function(e,n){e.panelIndex=n,r[e.type](o,l,e,n)})),o=null,d=null},panel:function(e,n,a,r){var i=void 0;a.panelPath=s(n,r),a.$label=jQuery('<li data-ax5docker-pane-tab="'+r+'" data-ax5docker-path="'+a.panelPath+'"><div class="title">'+a.name+'</div><div class="close-icon">'+t.icons.close+"</div></li>"),a.$item||(a.$item=jQuery('<div data-ax5docker-pane-item="'+r+'" data-ax5docker-pane-id="'+l()+'" data-ax5docker-path="'+a.panelPath+'"></div>')),n&&"stack"==n.type?(a.active&&(a.builded||u(a,"init"),u(a,"active")),e.find("[data-ax5docker-pane-tabs]").append(a.$label),e.find("[data-ax5docker-pane-item-views]").append(a.$item)):(i=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+a.panelPath+'" style="flex-grow: '+(a.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-aside="">'+t.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),a.builded||u(a,"init"),u(a,"active"),i.find("[data-ax5docker-pane-tabs]").append(a.$label),i.find("[data-ax5docker-pane-item-views]").append(a.$item),e.append(i)),i=null},resizeHandle:function(e,n,a,t){var l=jQuery('<div data-ax5docker-resize-handle="'+n.type+"/"+n.panelPath+"/"+t+'"></div>');e.append(l),l=null},row:function(e,a,t,l){var i=void 0;if(t.panelPath=s(a,l),a&&"stack"==a.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";i=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+t.panelPath+'" style="flex-grow: '+(t.flexGrow||1)+';"></div>'),e.append(i),n.isArray(t.panels)&&t.panels.forEach(function(e,n){n>0&&r.resizeHandle(i,t,e,n),e.panelIndex=n,r[e.type](i,t,e,n)}),i=null},column:function(e,a,t,l){var i=void 0;if(t.panelPath=s(a,l),a&&"stack"==a.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";i=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+t.panelPath+'" style="flex-grow: '+(t.flexGrow||1)+';"></div>'),e.append(i),n.isArray(t.panels)&&t.panels.forEach(function(e,n){n>0&&r.resizeHandle(i,t,e,n),e.panelIndex=n,r[e.type](i,t,e,n)}),i=null}},o=jQuery('<div data-ax5docker-panes=""></div>');e.panels[0]&&r[e.panels[0].type](o,null,e.panels[0],0),e.$target.html(o),e.$target.off("click.ax5docker-pane").on("click.ax5docker-pane","[data-ax5docker-pane-tab] .close-icon",function(e){h($(this).parents("[data-ax5docker-pane-tab]")),n.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tab]",function(e){var a=jQuery(this),t=i(a.parents("[data-ax5docker-pane]").attr("data-ax5docker-path")),l=a.attr("data-ax5docker-pane-tab");a.hasClass("active")||c(t,l),a=null,t=null,l=null,n.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tabs-more]",function(e){v($(this).parents("[data-ax5docker-pane]"),e),n.stopEvent(e)}),e.$target.off("mousedown.ax5docker-pane-resize").off("dragstart.ax5docker-pane-resize").on("mousedown.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){var t=this.getAttribute("data-ax5docker-resize-handle").split(/\//g);a.xvar.mousePosition=d(e),a.xvar.resizerType=t[0],a.xvar.resizerPath=t[1],a.xvar.resizerIndex=t[2],a.xvar.resizer$dom=$(this),a.xvar.resizerParent$dom=a.xvar.resizer$dom.parent(),a.xvar.resizerPrevGrow=n.number(a.xvar.resizer$dom.prev().css("flex-grow")),a.xvar.resizerNextGrow=n.number(a.xvar.resizer$dom.next().css("flex-grow")),"row"==a.xvar.resizerType?a.xvar.resizerCanvasWidth=a.xvar.resizer$dom.prev().innerWidth()+a.xvar.resizer$dom.next().innerWidth()+a.xvar.resizer$dom.width():a.xvar.resizerCanvasHeight=a.xvar.resizer$dom.prev().innerHeight()+a.xvar.resizer$dom.next().innerHeight()+a.xvar.resizer$dom.height(),f.on(this),n.stopEvent(e)}).on("dragstart.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){return n.stopEvent(e),!1}),m(),o=null},c=function(n,a){for(var t=n.panels[a],l=0,r=n.panels.length;l<r;l++)n.panels[l].active&&u(n.panels[l],"deactive");return t.builded||u(t,"init"),u(t,"active"),n=null,a=null,t=null,e},h=function(n){var a=jQuery(n),t=a.attr("data-ax5docker-path"),l=i(t);return u(l,"destroy"),a=null,t=null,l=null,e},v=function(a,t){var l=jQuery(a),r=l.attr("data-ax5docker-path"),s=i(r);if(!e.menu)throw console.log(s.panels),"'ax5ui-menu' is required to implement the function.";var o=n.map(s.panels,function(e){return{label:this.name,index:e,panePath:r}});return e.menu.setConfig({items:o,onClick:function(){c(i(this.panePath),this.index)}}),e.menu.popup(t),l=null,r=null,s=null,e},f={on:function(t){var l=$(t);l.offset().left,e.$target.offset().left;jQuery(document.body).bind("mousemove.ax5docker-"+e.instanceId,function(e){var t=d(e),l=void 0;a.xvar.resizerLived?"row"==a.xvar.resizerType?(a.xvar.__da=t.clientX-a.xvar.mousePosition.clientX,l=n.number(2*a.xvar.__da/a.xvar.resizerCanvasWidth,{round:6}),a.xvar.resizer$dom.prev().css({"flex-grow":a.xvar.resizerPrevGrow+l}),a.xvar.resizer$dom.next().css({"flex-grow":a.xvar.resizerNextGrow-l})):(a.xvar.__da=t.clientY-a.xvar.mousePosition.clientY,l=n.number(2*a.xvar.__da/a.xvar.resizerCanvasHeight,{round:6}),a.xvar.resizer$dom.prev().css({"flex-grow":a.xvar.resizerPrevGrow+l}),a.xvar.resizer$dom.next().css({"flex-grow":a.xvar.resizerNextGrow-l})):a.xvar.resizerLived=!0,t=null,l=null}).bind("mouseup.ax5docker-"+e.instanceId,function(e){f.off.call(a),n.stopEvent(e)}).bind("mouseleave.ax5docker-"+e.instanceId,function(e){f.off.call(a),n.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){if(a.xvar.resizerLived=!1,"undefined"==typeof e.xvar.__da);else{var t=a.xvar.resizer$dom.prev(),l=a.xvar.resizer$dom.next(),r=i(t.attr("data-ax5docker-path")),s=i(l.attr("data-ax5docker-path"));r.flexGrow=n.number(t.css("flex-grow")),s.flexGrow=n.number(l.css("flex-grow")),t=null,l=null,r=null,s=null}jQuery(document.body).unbind("mousemove.ax5docker-"+e.instanceId).unbind("mouseup.ax5docker-"+e.instanceId).unbind("mouseleave.ax5docker-"+e.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},x=ax5.util.debounce(function(e){e()},t.animateTime),m=function(){x(function(){this.$target.find("[data-ax5docker-pane-tabs]").each(function(){var e=jQuery(this).parent();this.scrollWidth>this.clientWidth?e.addClass("tabs-scrolled"):e.removeClass("tabs-scrolled"),e=null})}.bind(e))},y=function(){var a={stack:function(e){if(!n.isArray(e.panels))return!1;var t={type:"stack",panels:[]};return e.panels.forEach(function(e,n){if(e){var l=a[e.type](e);l&&t.panels.push(l),l=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},panel:function(e){return e},row:function(e){if(!n.isArray(e.panels))return!1;var t={type:"row",panels:[]};return e.panels.forEach(function(e,n){if(e){var l=a[e.type](e);l&&t.panels.push(l),l=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},column:function(e){if(!n.isArray(e.panels))return!1;var t={type:"column",panels:[]};return e.panels.forEach(function(e,n){if(e){var l=a[e.type](e);l&&t.panels.push(l),l=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)}};e.panels[0]?e.panels[0]=a[e.panels[0].type](e.panels[0]):e.panels=[],p()};this.init=function(e){return t=jQuery.extend(!0,{},t,e),t.target?(this.$target=jQuery(t.target),this.panels=t.panels||[],this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,this.onLoad=t.onLoad,this.onDataChanged=t.onDataChanged,ax5.ui.menu&&(this.menu=new ax5.ui.menu({theme:"default",position:"absolute",icons:{arrow:"▸"}})),void jQuery(window).bind("resize.ax5docker-"+this.id,function(){m()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(e){return this.panels=e||[],p(),this},this.addModule=function(e){return n.isObject(e)&&jQuery.extend(!0,this.modules,e),this},this.repaint=function(){return p(),this},this.addPanel=function(e,n,a,t){"undefined"==e&&(e="0"),e=e.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(e,n){return"panels["+e+"]"});var l=i(e);console.log(l);var r={stack:function(n,a,t){var l=jQuery.extend({},n),r={stack:function(e,n){e.panels.push(n),y()},"row-left":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(t),n.panels.push(l),y())},"row-right":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(l),n.panels.push(t),y())},"column-top":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"column"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(t),n.panels.push(l),y())},"column-bottom":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"column"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(l),n.panels.push(t),y())}};a in r&&r[a].call(this,n,t),l=null,r=null},row:function(n,a,t,l){var r=jQuery.extend({},n),s={stack:function(e,n){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,n)},"row-left":function(n,a,t){var l=e.substr(0,e.lastIndexOf(".")),s=i(l);"row"==s.type?(n.panels.splice(t,0,a),y()):(n=o(e,{type:"row",panels:[]}),n.panels.push(a),n.panels.push(r),y())},"row-right":function(n,a,t){var l=e.substr(0,e.lastIndexOf(".")),s=i(l);"row"==s.type?(n.panels.splice(t+1,0,a),y()):(n=o(e,{type:"row",panels:[]}),n.panels.push(r),n.panels.push(a),y())},"column-top":function(n,t,l){var s=e.substr(0,e.lastIndexOf(".")),d=i(s);"column"==d.type?this.addPanel(d.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(t),n.panels.push(r),y())},"column-bottom":function(n,t,l){var s=e.substr(0,e.lastIndexOf(".")),d=i(s);"column"==d.type?this.addPanel(d.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(r),n.panels.push(t),y())}};a in s&&s[a].call(this,n,t,l),s=null,r=null},column:function(n,a,t,l){var r=jQuery.extend({},n),s={stack:function(e,n){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,n)},"row-left":function(n,t){var l=e.substr(0,e.lastIndexOf(".")),s=i(l);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(t),n.panels.push(r),y())},"row-right":function(n,t){var l=e.substr(0,e.lastIndexOf(".")),s=i(l);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(r),n.panels.push(t),y())},"column-top":function(e,n){e.panels.splice(l,0,n),y()},"column-bottom":function(e,n){e.panels.splice(l+1,0,n),y()}};a in s&&s[a].call(this,n,t),s=null,r=null},panel:function(n,a,t){var l=jQuery.extend({},n),r={stack:function(n,a){n=o(e,{type:"stack",panels:[]}),n.panels.push(l),n.panels.push(a),y()},"row-left":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(t),n.panels.push(l),y())},"row-right":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"row"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"row",panels:[]}),n.panels.push(l),n.panels.push(t),y())},"column-top":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"column"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(t),n.panels.push(l),y())},"column-bottom":function(n,t){var r=e.substr(0,e.lastIndexOf(".")),s=i(r);"column"==s.type?this.addPanel(s.panelPath,a,t,n.panelIndex):(n=o(e,{type:"column",panels:[]}),n.panels.push(l),n.panels.push(t),y())}};a in r&&r[a].call(this,n,t),l=null,r=null}};return r[l.type].call(this,l,n,a,t),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}())}(),function(){var e=ax5.ui.docker,n=function(e){return" \n{{#panels}}\n{{#panels}}\n{{/panels}}\n{{^panels}}\n{{/panels}}\n{{/panels}}\n        "};e.tmpl={panels:n,get:function(n,a,t){return ax5.mustache.render(e.tmpl[n].call(this,t),a)}}}();