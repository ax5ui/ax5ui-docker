"use strict";!function(){var e=ax5.ui,a=ax5.util,n=void 0;e.addClass({className:"docker",version:"1.3.107"},function(){var t=function(){var t=this,r=this,l=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."},disableClosePanel:!1,disableDragPanel:!1},this.xvar={},this.menu=null,this.panels=[],this.panelId=0,this.modules={},l=this.config;var o=function(){return t.panelId++},i={init:function(e,a){e.$element.html(a.name)},active:function(e,a){},deactive:function(e,a){},destroy:function(e,a){}},s=function(e,a){var n=[];return e&&"undefined"!=typeof e.panelPath&&n.push(e.panelPath),n.push("panels["+(a||0)+"]"),n.join(".")},d=function(e){var n=[],r=a.isArray(e)?[].concat(e):[].concat(e.split(/[\.\[\]]/g));r.forEach(function(e){""!==e&&n.push('["'+e.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+n.join("")+";").call(t)}catch(l){return}},p=function(e){var a=e.panelPath.substr(0,e.panelPath.lastIndexOf("."));try{return Function("","return this."+a+";").call(t)}catch(n){return void console.log(n)}},c=function(e,n){var r=[],l=a.isArray(e)?[].concat(e):[].concat(e.split(/[\.\[\]]/g));return l.forEach(function(e){""!==e&&r.push('["'+e.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+r.join("")+" = val;").call(t,n)},u=function(e){var a=void 0,n=e.originalEvent?e.originalEvent:e;return a="changedTouches"in n?n.changedTouches[0]:n,{clientX:a.pageX,clientY:a.pageY}},f=function(e,n){var r=jQuery.extend(e.moduleState,{name:e.name}),o={$element:e.$item},s=void 0,d={init:function(){e.builded=!0,s=e.moduleName in t.modules&&"init"in t.modules[e.moduleName]?t.modules[e.moduleName]:i,s.init(o,r)},active:function(){e.active=!0,e.$label.addClass("active"),e.$item.addClass("active");var a=e.$label.parent();a.get(0)&&a.get(0).clientWidth!==a.get(0).scrollWidth&&a.animate({scrollLeft:e.$label.position().left},300),s=e.moduleName in t.modules&&"active"in t.modules[e.moduleName]?t.modules[e.moduleName]:i,s.active(o,r),a=null},deactive:function(){e.active=!1,e.$label.removeClass("active"),e.$item.removeClass("active"),s=e.moduleName in t.modules&&"deactive"in t.modules[e.moduleName]?t.modules[e.moduleName]:i,s.deactive(o,r)},destroy:function(){s=e.moduleName in t.modules&&"destroy"in t.modules[e.moduleName]?t.modules[e.moduleName]:i,s.destroy(o,r),c(e.panelPath,null),P()}},p={panel:e,controlType:n},u=function(){d[n](),s=null,a.isFunction(l.control.after)&&l.control.after.call(p,p)};d[n]&&(a.isFunction(l.control.before)?l.control.before.call(p,p,function(){u()}):u())},h=function(){var e={stack:function(t,r,o,i){var d=void 0,p=-1;o.panelPath=s(r,i),d=jQuery(n.tmpl.get.call(this,"stack-panel",{name:o.name,panelPath:o.panelPath,icons:l.icons,disableClosePanel:l.disableClosePanel,disableDragPanel:l.disableDragPanel},{})),t.append(d),a.isArray(o.panels)&&(o.panels.forEach(function(e,a){e.active&&(p=a)}),p===-1&&(p=0),o.panels[p].active=!0,o.panels.forEach(function(a,n){a.panelIndex=n,e[a.type](d,o,a,n)})),d=null,p=null},panel:function(e,a,t,r){var i=void 0;t.panelPath=s(a,r),t.$label=jQuery(n.tmpl.get.call(this,"panel-label",{pIndex:r,name:t.name,panelPath:t.panelPath,icons:l.icons,disableClosePanel:l.disableClosePanel,disableDragPanel:l.disableDragPanel},{})),t.$item||(t.$item=jQuery('<div data-ax5docker-pane-item="'+r+'" data-ax5docker-pane-id="'+o()+'" data-ax5docker-path="'+t.panelPath+'"></div>')),a&&"stack"==a.type?(t.active&&(t.builded||f(t,"init"),f(t,"active")),e.find("[data-ax5docker-pane-tabs]").append(t.$label),e.find("[data-ax5docker-pane-item-views]").append(t.$item)):(i=jQuery(n.tmpl.get.call(this,"stack-panel",{name:t.name,panelPath:t.panelPath,flexGrow:t.flexGrow,icons:l.icons,disableClosePanel:l.disableClosePanel,disableDragPanel:l.disableDragPanel},{})),t.builded||f(t,"init"),f(t,"active"),i.find("[data-ax5docker-pane-tabs]").append(t.$label),i.find("[data-ax5docker-pane-item-views]").append(t.$item),e.append(i)),i=null},resizeHandle:function(e,a,n,t){var r=jQuery('<div data-ax5docker-resize-handle="'+a.type+"/"+a.panelPath+"/"+t+'"></div>');e.append(r),r=null},row:function(n,t,r,l){var o=void 0;if(r.panelPath=s(t,l),t&&"stack"==t.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";o=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+r.panelPath+'" style="flex-grow: '+(r.flexGrow||1)+';"></div>'),n.append(o),a.isArray(r.panels)&&r.panels.forEach(function(a,n){n>0&&e.resizeHandle(o,r,a,n),a.panelIndex=n,e[a.type](o,r,a,n)}),o=null},column:function(n,t,r,l){var o=void 0;if(r.panelPath=s(t,l),t&&"stack"==t.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";o=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+r.panelPath+'" style="flex-grow: '+(r.flexGrow||1)+';"></div>'),n.append(o),a.isArray(r.panels)&&r.panels.forEach(function(a,n){n>0&&e.resizeHandle(o,r,a,n),a.panelIndex=n,e[a.type](o,r,a,n)}),o=null}},i=jQuery('<div data-ax5docker-panes=""></div>');t.panels[0]&&e[t.panels[0].type](i,null,t.panels[0],0),t.$target.html(i),t.$target.off("click.ax5docker-pane").on("click.ax5docker-pane","[data-ax5docker-pane-tab] .close-icon",function(e){x($(this).parents("[data-ax5docker-pane-tab]")),a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tab]",function(e){var n=jQuery(this),t=d(n.parents("[data-ax5docker-pane]").attr("data-ax5docker-path")),r=n.attr("data-ax5docker-pane-tab");n.hasClass("active")||v(t,r),n=null,t=null,r=null,a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tabs-more]",function(e){m($(this).parents("[data-ax5docker-pane]"),e),a.stopEvent(e)}),t.$target.off("mousedown.ax5docker-pane-resize").off("dragstart.ax5docker-pane-resize").on("dragstart.ax5docker-pane-resize","[data-ax5docker-pane-tab]",function(e){l.disableDragPanel||y.on(this)}).on("mousedown.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){var n=this.getAttribute("data-ax5docker-resize-handle").split(/\//g);r.xvar.mousePosition=u(e),r.xvar.resizerType=n[0],r.xvar.resizerPath=n[1],r.xvar.resizerIndex=n[2],r.xvar.resizer$dom=$(this),r.xvar.resizerParent$dom=r.xvar.resizer$dom.parent(),r.xvar.resizerPrevGrow=a.number(r.xvar.resizer$dom.prev().css("flex-grow")),r.xvar.resizerNextGrow=a.number(r.xvar.resizer$dom.next().css("flex-grow")),"row"==r.xvar.resizerType?r.xvar.resizerCanvasWidth=r.xvar.resizer$dom.prev().innerWidth()+r.xvar.resizer$dom.next().innerWidth()+r.xvar.resizer$dom.width():r.xvar.resizerCanvasHeight=r.xvar.resizer$dom.prev().innerHeight()+r.xvar.resizer$dom.next().innerHeight()+r.xvar.resizer$dom.height(),g.on(this),a.stopEvent(e)}).on("dragstart.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){return a.stopEvent(e),!1}),b(),i=null},v=function(e,a){for(var n=e.panels[a],r=0,l=e.panels.length;r<l;r++)e.panels[r].active&&f(e.panels[r],"deactive");return n.builded||f(n,"init"),f(n,"active"),e=null,a=null,n=null,t},x=function(e){var a=jQuery(e),n=a.attr("data-ax5docker-path"),r=d(n);return f(r,"destroy"),a=null,n=null,r=null,t},m=function(e,n){var r=jQuery(e),l=r.attr("data-ax5docker-path"),o=d(l);if(!t.menu)throw console.log(o.panels),"'ax5ui-menu' is required to implement the function.";var i=a.map(o.panels,function(e){return{label:this.name,index:e,panePath:l}});return t.menu.setConfig({items:i,onClick:function(){v(d(this.panePath),this.index)}}),t.menu.popup(n),r=null,l=null,o=null,t},g={on:function(e){var n=$(e);n.offset().left,t.$target.offset().left;jQuery(document.body).on("mousemove.ax5docker-"+t.instanceId,function(e){var n=u(e),t=void 0;r.xvar.resizerLived?"row"==r.xvar.resizerType?(r.xvar.__da=n.clientX-r.xvar.mousePosition.clientX,t=a.number(2*r.xvar.__da/r.xvar.resizerCanvasWidth,{round:6}),r.xvar.resizer$dom.prev().css({"flex-grow":r.xvar.resizerPrevGrow+t}),r.xvar.resizer$dom.next().css({"flex-grow":r.xvar.resizerNextGrow-t})):(r.xvar.__da=n.clientY-r.xvar.mousePosition.clientY,t=a.number(2*r.xvar.__da/r.xvar.resizerCanvasHeight,{round:6}),r.xvar.resizer$dom.prev().css({"flex-grow":r.xvar.resizerPrevGrow+t}),r.xvar.resizer$dom.next().css({"flex-grow":r.xvar.resizerNextGrow-t})):r.xvar.resizerLived=!0,n=null,t=null}).on("mouseup.ax5docker-"+t.instanceId,function(e){g.off(),a.stopEvent(e)}).on("mouseleave.ax5docker-"+t.instanceId,function(e){g.off(),a.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){if(r.xvar.resizerLived=!1,"undefined"==typeof t.xvar.__da);else{var e=r.xvar.resizer$dom.prev(),n=r.xvar.resizer$dom.next(),l=d(e.attr("data-ax5docker-path")),o=d(n.attr("data-ax5docker-path"));l.flexGrow=a.number(e.css("flex-grow")),o.flexGrow=a.number(n.css("flex-grow")),e=null,n=null,l=null,o=null}jQuery(document.body).off("mousemove.ax5docker-"+t.instanceId).off("mouseup.ax5docker-"+t.instanceId).off("mouseleave.ax5docker-"+t.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},y={on:function(){t.panels[0]&&t.panels[0].panels&&t.panels[0].panels.length&&(t.xvar.dragger={target:null,dragOverVertical:null,dragOverHorizontal:null},t.$target.on("dragover.ax5docker-"+t.instanceId,"[data-ax5docker-path]",function(e){y.dragover(this,e),a.stopEvent(e)}).on("drop.ax5docker-"+t.instanceId,function(e){y.off("drop"),a.stopEvent(e)}).on("dragend.ax5docker-"+t.instanceId,function(e){y.off(),a.stopEvent(e)}))},dragover:function(e,a){var n=jQuery(e);null!=t.xvar.dragger.target&&t.xvar.dragger.target.get(0)==n.get(0)||(t.xvar.dragger.target&&t.xvar.dragger.target.removeAttr("data-dropper"),t.xvar.dragger.target=n,t.xvar.dragger.dragOverVertical=null,t.xvar.dragger.dragOverHorizontal=null);var r={};r=n.offset(),r.width=n.width(),r.height=n.height();var l=u(a),o=void 0,i=void 0;if(n.attr("data-ax5docker-pane-tab")){var s=r.width/2;if(r.left<=l.clientX&&r.left+s>=l.clientX?i="left":r.left+s<=l.clientX&&r.left+2*s>=l.clientX&&(i="right"),t.xvar.dragger.dragOverHorizontal!=i&&"undefined"!=typeof i){t.xvar.dragger.dragOverHorizontal=i;var d={left:function(e){e.attr("data-dropper","left")},right:function(e){e.attr("data-dropper","right")}};t.xvar.dragger.dragOverHorizontal in d&&d[t.xvar.dragger.dragOverHorizontal](t.xvar.dragger.target)}}else if(n.attr("data-ax5docker-pane-item")){var p=r.height/3,c=r.width/3;if(r.top<=l.clientY&&r.top+p>=l.clientY?o="top":r.top+p<=l.clientY&&r.top+2*p>=l.clientY?o="middle":r.top+2*p<=l.clientY&&r.top+3*p>=l.clientY&&(o="bottom"),r.left<=l.clientX&&r.left+c>=l.clientX?i="left":r.left+c<=l.clientX&&r.left+2*c>=l.clientX?i="center":r.left+2*c<=l.clientX&&r.left+3*c>=l.clientX&&(i="right"),t.xvar.dragger.dragOverVertical!=o||t.xvar.dragger.dragOverHorizontal!=i){t.xvar.dragger.dragOverVertical=o,t.xvar.dragger.dragOverHorizontal=i;var d={"left-top":function(e){e.attr("data-dropper","left")},"right-top":function(e){e.attr("data-dropper","right")},"center-top":function(e){e.attr("data-dropper","top")},"left-middle":function(e){e.attr("data-dropper","left")},"right-middle":function(e){e.attr("data-dropper","right")},"center-middle":function(e){e.attr("data-dropper","center")},"left-bottom":function(e){e.attr("data-dropper","left")},"right-bottom":function(e){e.attr("data-dropper","right")},"center-bottom":function(e){e.attr("data-dropper","bottom")}};t.xvar.dragger.dragOverHorizontal+"-"+t.xvar.dragger.dragOverVertical in d&&d[t.xvar.dragger.dragOverHorizontal+"-"+t.xvar.dragger.dragOverVertical](t.xvar.dragger.target)}}},off:function(e){e&&console.log(t.xvar.dragger),t.$target.off("dragover.ax5docker-"+t.instanceId).off("drop.ax5docker-"+t.instanceId).off("dragend.ax5docker-"+t.instanceId),t.xvar.dragger.target.removeAttr("data-dropper")}},k=ax5.util.debounce(function(e){e()},l.animateTime),b=function(){k(function(){this.$target.find("[data-ax5docker-pane-tabs]").each(function(){var e=jQuery(this).parent();this.scrollWidth>this.clientWidth?e.addClass("tabs-scrolled"):e.removeClass("tabs-scrolled"),e=null})}.bind(t))},P=function(){var e={stack:function(n){if(!a.isArray(n.panels))return!1;var t={type:"stack",panels:[]};return n.panels.forEach(function(a,n){if(a){var r=e[a.type](a);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},panel:function(e){return e},row:function(n){if(!a.isArray(n.panels))return!1;var t={type:"row",panels:[]};return n.panels.forEach(function(a,n){if(a){var r=e[a.type](a);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},column:function(n){if(!a.isArray(n.panels))return!1;var t={type:"column",panels:[]};return n.panels.forEach(function(a,n){if(a){var r=e[a.type](a);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)}};t.panels[0]?t.panels[0]=e[t.panels[0].type](t.panels[0]):t.panels=[],h()};this.init=function(e){return l=jQuery.extend(!0,{},l,e),l.target?(this.$target=jQuery(l.target),this.panels=l.panels||[],this.onStateChanged=l.onStateChanged,this.onClick=l.onClick,this.onLoad=l.onLoad,this.onDataChanged=l.onDataChanged,ax5.ui.menu&&(this.menu=new ax5.ui.menu({theme:"default",position:"absolute",icons:{arrow:"▸"}})),void jQuery(window).bind("resize.ax5docker-"+this.id,function(){b()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(e){return this.panels=e||[],h(),this},this.addModule=function(e){return a.isObject(e)&&jQuery.extend(!0,this.modules,e),this},this.repaint=function(){return h(),this},this.addPanel=function(e,a,n,t){var r="";"undefined"==e&&(r="0"),r=e.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(e,a){return"panels["+e+"]"});var l=d(r),o=p(l);"stack"==o.type&&(l=o,r=l.panelPath);var i={stack:function(e,a,n){var t=jQuery.extend({},e),l={stack:function(e,a){e.panels.push(a),P()},"row-left":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(n),e.panels.push(t),P())},"row-right":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(t),e.panels.push(n),P())},"column-top":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(n),e.panels.push(t),P())},"column-bottom":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(t),e.panels.push(n),P())}};a in l&&l[a].call(this,e,n),t=null,l=null},row:function(e,a,n,t){var l=jQuery.extend({},e),o={stack:function(e,n){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,n)},"row-left":function(e,a,n){var t=r.substr(0,r.lastIndexOf(".")),o=d(t);o&&"row"==o.type?(e.panels.splice(n,0,a),P()):(e=c(r,{type:"row",panels:[]}),e.panels.push(a),e.panels.push(l),P())},"row-right":function(e,a,n){var t=r.substr(0,r.lastIndexOf(".")),o=d(t);o&&"row"==o.type?(e.panels.splice(n+1,0,a),P()):(e=c(r,{type:"row",panels:[]}),e.panels.push(l),e.panels.push(a),P())},"column-top":function(e,n,t){var o=r.substr(0,r.lastIndexOf(".")),i=d(o);i&&"column"==i.type?this.addPanel(i.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(n),e.panels.push(l),P())},"column-bottom":function(e,n,t){var o=r.substr(0,r.lastIndexOf(".")),i=d(o);i&&"column"==i.type?this.addPanel(i.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(l),e.panels.push(n),P())}};a in o&&o[a].call(this,e,n,t),o=null,l=null},column:function(e,a,n,t){var l=jQuery.extend({},e),o={stack:function(e,n){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,n)},"row-left":function(e,n){var t=r.substr(0,r.lastIndexOf(".")),o=d(t);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(n),e.panels.push(l),P())},"row-right":function(e,n){var t=r.substr(0,r.lastIndexOf(".")),o=d(t);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(l),e.panels.push(n),P())},"column-top":function(e,a){e.panels.splice(t,0,a),P()},"column-bottom":function(e,a){e.panels.splice(t+1,0,a),P()}};a in o&&o[a].call(this,e,n),o=null,l=null},panel:function(e,a,n){var t=jQuery.extend({},e),l={stack:function(e,a){e=c(r,{type:"stack",panels:[]}),e.panels.push(t),e.panels.push(a),P()},"row-left":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(n),e.panels.push(t),P())},"row-right":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"row",panels:[]}),e.panels.push(t),e.panels.push(n),P())},"column-top":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(n),e.panels.push(t),P())},"column-bottom":function(e,n){var l=r.substr(0,r.lastIndexOf(".")),o=d(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,n,e.panelIndex):(e=c(r,{type:"column",panels:[]}),e.panels.push(t),e.panels.push(n),P())}};a in l&&l[a].call(this,e,n),t=null,l=null}};return i[l.type].call(this,l,a,n,t),this},this.appendPanel=function(e,a,n){return this},this.main=function(){e.docker_instance=e.docker_instance||[],e.docker_instance.push(this),arguments&&a.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return t}()),n=ax5.ui.docker}(),function(){var e=ax5.ui.docker,a=function(){return'<div data-ax5docker-pane="" data-ax5docker-path="{{panelPath}}" style="flex-grow: {{#flexGrow}}{{.}}{{/flexGrow}}{{^flexGrow}}1{{/flexGrow}};">\n    <ul data-ax5docker-pane-tabs=""></ul>\n    <div data-ax5docker-pane-tabs-more="">{{{icons.more}}}</div>\n    <div data-ax5docker-pane-item-views=""></div>\n</div>'},n=function(){return'<li data-ax5docker-pane-tab="{{pIndex}}" data-ax5docker-path="{{panelPath}}">\n    <div class="title">{{{name}}}</div>\n    {{^disableClosePanel}}<div class="close-icon">{{{icons.close}}}</div>{{/disableClosePanel}}\n</li>'};e.tmpl={"stack-panel":a,"panel-label":n,get:function(a,n,t){return ax5.mustache.render(e.tmpl[a].call(this,t),n)}}}();