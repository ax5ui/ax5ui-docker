"use strict";!function(){var a=ax5.ui,e=ax5.util;a.addClass({className:"docker",version:"${VERSION}"},function(){var a=function(){var a=this,n=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{}},this.panels=[],this.panelId=0,this.modules={},n=this.config;var t=function(){return a.panelId++},i={init:function(a,e){a.$element.html(e.name)},active:function(a,e){},deactive:function(a,e){},destroy:function(a,e){}},o=function(a,e){var n=[];return a&&"undefined"!=typeof a.panelPath&&n.push(a.panelPath),n.push("panels["+(e||0)+"]"),n.join(".")},d=function(a,e){var n=[],t=[].concat(e.split(/[\.\[\]]/g));return t.forEach(function(a){""!==a&&n.push('["'+a.replace(/['\"]/g,"")+'"]')}),Function("","return this"+n.join("")+";").call(a)},l=function(a,e,n){var t=[],i=[].concat(e.split(/[\.\[\]]/g));return i.forEach(function(a){""!==a&&t.push('["'+a.replace(/['\"]/g,"")+'"]')}),Function("val","this"+t.join("")+" = val;").call(a,n)},c=function(t,o){var d=jQuery.extend(t.moduleState,{name:t.name}),c={$element:t.$item},r=void 0,s={init:function(){t.builded=!0,r=t.moduleName in a.modules&&"init"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,r.init(c,d)},active:function(){r=t.moduleName in a.modules&&"active"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,r.active(c,d)},deactive:function(){r=t.moduleName in a.modules&&"deactive"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,r.deactive(c,d)},destroy:function(){r=t.moduleName in a.modules&&"destroy"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,r.destroy(c,d),t.$label.remove(),t.$item.remove(),l(a,t.panelPath,null),p()}},u={panel:t,controlType:o},v=function(){s[o](),r=null,e.isFunction(n.control.after)&&n.control.after.call(u,u)};s[o]&&(e.isFunction(n.control.before)?n.control.before.call(u,u,function(){v()}):v())},r=function(){var i={stack:function(a,n,t,d){var l=void 0,c=-1;t.panelPath=o(n,d),l=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+t.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-item-views=""></div></div>'),a.append(l),e.isArray(t.panels)&&(t.panels.forEach(function(a,e){t.active&&(c=e)}),c===-1&&(c=0),t.panels[c].active=!0,t.panels.forEach(function(a,e){i[a.type](l,t,a,e)})),l=null,c=null},panel:function(a,e,i,d){var l=void 0;i.panelPath=o(e,d),i.$label=jQuery('<li data-ax5docker-pane-tab="'+d+'" data-ax5docker-path="'+i.panelPath+'"><div class="title">'+i.name+'</div><div class="close-icon">'+n.icons.close+"</div></li>"),i.$item||(i.$item=jQuery('<div data-ax5docker-pane-item="'+d+'" data-ax5docker-pane-id="'+t()+'" data-ax5docker-path="'+i.panelPath+'"></div>')),e&&"stack"==e.type?(i.active&&(c(i,"init"),i.$label.addClass("active"),i.$item.addClass("active")),a.find("[data-ax5docker-pane-tabs]").append(i.$label),a.find("[data-ax5docker-pane-item-views]").append(i.$item)):(l=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+i.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-item-views=""></div></div>'),c(i,"init"),i.$label.addClass("active"),i.$item.addClass("active"),l.find("[data-ax5docker-pane-tabs]").append(i.$label),l.find("[data-ax5docker-pane-item-views]").append(i.$item),a.append(l)),l=null},resizeHandel:function(a,e,n){var t=jQuery('<div data-ax5docker-resize-handle=""></div>');a.append(t),t=null},row:function(a,n,t,d){var l=void 0;if(t.panelPath=o(n,d),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";l=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+t.panelPath+'"></div>'),a.append(l),e.isArray(t.panels)&&t.panels.forEach(function(a,e){e>0&&i.resizeHandel(l,a,t,e),i[a.type](l,t,a,e)}),l=null},column:function(a,n,t,d){var l=void 0;if(t.panelPath=o(n,d),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";l=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+t.panelPath+'"></div>'),a.append(l),e.isArray(t.panels)&&t.panels.forEach(function(a,e){d>0&&i.resizeHandel(l,a,t,e),i[a.type](l,t,a,e)}),l=null}},d=jQuery('<div data-ax5docker-panes=""></div>');i[a.panels[0].type](d,null,a.panels[0],0),a.$target.html(d),a.$target.off("click").on("click","[data-ax5docker-pane-tab] .close-icon",function(a){u($(this).parents("[data-ax5docker-pane-tab]")),e.stopEvent(a)}).on("click","[data-ax5docker-pane-tab]",function(a){s(this),e.stopEvent(a)}),d=null},s=function(e){var n=jQuery(e),t=n.parents("[data-ax5docker-pane]"),i=n.attr("data-ax5docker-pane-tab"),o=d(a,n.attr("data-ax5docker-path"));return!n.hasClass("active")&&(t.find(".active").removeClass("active"),t.find('[data-ax5docker-pane-tab="'+i+'"]').addClass("active"),t.find('[data-ax5docker-pane-item="'+i+'"]').addClass("active"),c(o,o.builded?"active":"init"),a)},u=function(e){var n=jQuery(e),t=n.attr("data-ax5docker-path"),i=d(a,t);return c(i,"destroy"),a},p=function(){console.log(a.panels);var e=[],n={stack:function(){},panel:function(){},row:function(){},column:function(){}};n[a.panels[0].type](e,a.panels[0]),a.panels=e,r()};this.init=function(a){return n=jQuery.extend(!0,{},n,a),n.target?(this.$target=jQuery(n.target),this.panels=n.panels||[],this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onLoad=n.onLoad,void(this.onDataChanged=n.onDataChanged)):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(a){return this.panels=a||[],r(),this},this.addModule=function(a){return e.isObject(a)&&jQuery.extend(!0,this.modules,a),this},this.repaint=function(){r()},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return a}())}(),function(){var a=ax5.ui.docker,e=function(a){return" \n{{#panels}}\n{{#panels}}\n{{/panels}}\n{{^panels}}\n{{/panels}}\n{{/panels}}\n        "};a.tmpl={panels:e,get:function(e,n,t){return ax5.mustache.render(a.tmpl[e].call(this,t),n)}}}();
//# sourceMappingURL=ax5docker.min.js.map
