"use strict";!function(){var e=ax5.ui,a=ax5.util;e.addClass({className:"docker",version:"${VERSION}"},function(){var e=function(){var e=this,n=this,t=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."}},this.xvar={},this.menu=null,this.panels=[],this.panelId=0,this.modules={},t=this.config;var r=function(){return e.panelId++},s={init:function(e,a){e.$element.html(a.name)},active:function(e,a){},deactive:function(e,a){},destroy:function(e,a){}},l=function(e,a){var n=[];return e&&"undefined"!=typeof e.panelPath&&n.push(e.panelPath),n.push("panels["+(a||0)+"]"),n.join(".")},o=function(n){var t=[],r=a.isArray(n)?[].concat(n):[].concat(n.split(/[\.\[\]]/g));r.forEach(function(e){""!==e&&t.push('["'+e.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+t.join("")+";").call(e)}catch(s){return}},i=function(n,t){var r=[],s=a.isArray(n)?[].concat(n):[].concat(n.split(/[\.\[\]]/g));return s.forEach(function(e){""!==e&&r.push('["'+e.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+r.join("")+" = val;").call(e,t)},d=function(e){var a=void 0,n=e.originalEvent?e.originalEvent:e;return a="changedTouches"in n?n.changedTouches[0]:n,{clientX:a.pageX,clientY:a.pageY}},p=function(n,r){var l=jQuery.extend(n.moduleState,{name:n.name}),o={$element:n.$item},d=void 0,p={init:function(){n.builded=!0,d=n.moduleName in e.modules&&"init"in e.modules[n.moduleName]?e.modules[n.moduleName]:s,d.init(o,l)},active:function(){n.active=!0,n.$label.addClass("active"),n.$item.addClass("active"),d=n.moduleName in e.modules&&"active"in e.modules[n.moduleName]?e.modules[n.moduleName]:s,d.active(o,l)},deactive:function(){n.active=!1,n.$label.removeClass("active"),n.$item.removeClass("active"),d=n.moduleName in e.modules&&"deactive"in e.modules[n.moduleName]?e.modules[n.moduleName]:s,d.deactive(o,l)},destroy:function(){d=n.moduleName in e.modules&&"destroy"in e.modules[n.moduleName]?e.modules[n.moduleName]:s,d.destroy(o,l),i(n.panelPath,null),m()}},u={panel:n,controlType:r},c=function(){p[r](),d=null,a.isFunction(t.control.after)&&t.control.after.call(u,u)};p[r]&&(a.isFunction(t.control.before)?t.control.before.call(u,u,function(){c()}):c())},u=function(){var s={stack:function(e,n,r,o){var i=void 0,d=-1;r.panelPath=l(n,o),i=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+r.panelPath+'" style="flex-grow: '+(r.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-more="">'+t.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),e.append(i),a.isArray(r.panels)&&(r.panels.forEach(function(e,a){e.active&&(d=a)}),d===-1&&(d=0),r.panels[d].active=!0,r.panels.forEach(function(e,a){e.panelIndex=a,s[e.type](i,r,e,a)})),i=null,d=null},panel:function(e,a,n,s){var o=void 0;n.panelPath=l(a,s),n.$label=jQuery('<li data-ax5docker-pane-tab="'+s+'" data-ax5docker-path="'+n.panelPath+'"><div class="title">'+n.name+'</div><div class="close-icon">'+t.icons.close+"</div></li>"),n.$item||(n.$item=jQuery('<div data-ax5docker-pane-item="'+s+'" data-ax5docker-pane-id="'+r()+'" data-ax5docker-path="'+n.panelPath+'"></div>')),a&&"stack"==a.type?(n.active&&(n.builded||p(n,"init"),p(n,"active")),e.find("[data-ax5docker-pane-tabs]").append(n.$label),e.find("[data-ax5docker-pane-item-views]").append(n.$item)):(o=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+n.panelPath+'" style="flex-grow: '+(n.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-aside="">'+t.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),n.builded||p(n,"init"),p(n,"active"),o.find("[data-ax5docker-pane-tabs]").append(n.$label),o.find("[data-ax5docker-pane-item-views]").append(n.$item),e.append(o)),o=null},resizeHandle:function(e,a,n,t){var r=jQuery('<div data-ax5docker-resize-handle="'+a.type+"/"+a.panelPath+"/"+t+'"></div>');e.append(r),r=null},row:function(e,n,t,r){var o=void 0;if(t.panelPath=l(n,r),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";o=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+t.panelPath+'" style="flex-grow: '+(t.flexGrow||1)+';"></div>'),e.append(o),a.isArray(t.panels)&&t.panels.forEach(function(e,a){a>0&&s.resizeHandle(o,t,e,a),e.panelIndex=a,s[e.type](o,t,e,a)}),o=null},column:function(e,n,t,r){var o=void 0;if(t.panelPath=l(n,r),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";o=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+t.panelPath+'" style="flex-grow: '+(t.flexGrow||1)+';"></div>'),e.append(o),a.isArray(t.panels)&&t.panels.forEach(function(e,a){a>0&&s.resizeHandle(o,t,e,a),e.panelIndex=a,s[e.type](o,t,e,a)}),o=null}},o=jQuery('<div data-ax5docker-panes=""></div>');e.panels[0]&&s[e.panels[0].type](o,null,e.panels[0],0),e.$target.html(o),e.$target.off("click.ax5docker-pane").on("click.ax5docker-pane","[data-ax5docker-pane-tab] .close-icon",function(e){h($(this).parents("[data-ax5docker-pane-tab]")),a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tab]",function(e){c(this),a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tabs-more]",function(e){console.log("more"),a.stopEvent(e)}),e.$target.off("mousedown.ax5docker-pane-resize").off("dragstart.ax5docker-pane-resize").on("mousedown.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){var t=this.getAttribute("data-ax5docker-resize-handle").split(/\//g);n.xvar.mousePosition=d(e),n.xvar.resizerType=t[0],n.xvar.resizerPath=t[1],n.xvar.resizerIndex=t[2],n.xvar.resizer$dom=$(this),n.xvar.resizerParent$dom=n.xvar.resizer$dom.parent(),n.xvar.resizerPrevGrow=a.number(n.xvar.resizer$dom.prev().css("flex-grow")),n.xvar.resizerNextGrow=a.number(n.xvar.resizer$dom.next().css("flex-grow")),"row"==n.xvar.resizerType?n.xvar.resizerCanvasWidth=n.xvar.resizer$dom.prev().innerWidth()+n.xvar.resizer$dom.next().innerWidth()+n.xvar.resizer$dom.width():n.xvar.resizerCanvasHeight=n.xvar.resizer$dom.prev().innerHeight()+n.xvar.resizer$dom.next().innerHeight()+n.xvar.resizer$dom.height(),v.on(this),a.stopEvent(e)}).on("dragstart.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){return a.stopEvent(e),!1}),x(),o=null},c=function(a){var n=jQuery(a),t=n.parents("[data-ax5docker-pane]"),r=(n.attr("data-ax5docker-pane-tab"),o(t.attr("data-ax5docker-path"))),s=o(n.attr("data-ax5docker-path"));if(n.hasClass("active"))return!1;for(var l=0,i=r.panels.length;l<i;l++)r.panels[l].active&&p(r.panels[l],"deactive");return s.builded||p(s,"init"),p(s,"active"),e},h=function(a){var n=jQuery(a),t=n.attr("data-ax5docker-path"),r=o(t);return p(r,"destroy"),e},v={on:function(t){var r=$(t);r.offset().left,e.$target.offset().left;jQuery(document.body).bind("mousemove.ax5docker-"+e.instanceId,function(e){var t=d(e),r=void 0;n.xvar.resizerLived?"row"==n.xvar.resizerType?(n.xvar.__da=t.clientX-n.xvar.mousePosition.clientX,r=a.number(2*n.xvar.__da/n.xvar.resizerCanvasWidth,{round:6}),n.xvar.resizer$dom.prev().css({"flex-grow":n.xvar.resizerPrevGrow+r}),n.xvar.resizer$dom.next().css({"flex-grow":n.xvar.resizerNextGrow-r})):(n.xvar.__da=t.clientY-n.xvar.mousePosition.clientY,r=a.number(2*n.xvar.__da/n.xvar.resizerCanvasHeight,{round:6}),n.xvar.resizer$dom.prev().css({"flex-grow":n.xvar.resizerPrevGrow+r}),n.xvar.resizer$dom.next().css({"flex-grow":n.xvar.resizerNextGrow-r})):n.xvar.resizerLived=!0,t=null,r=null}).bind("mouseup.ax5docker-"+e.instanceId,function(e){v.off.call(n),a.stopEvent(e)}).bind("mouseleave.ax5docker-"+e.instanceId,function(e){v.off.call(n),a.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){if(n.xvar.resizerLived=!1,"undefined"==typeof e.xvar.__da);else{var t=n.xvar.resizer$dom.prev(),r=n.xvar.resizer$dom.next(),s=o(t.attr("data-ax5docker-path")),l=o(r.attr("data-ax5docker-path"));s.flexGrow=a.number(t.css("flex-grow")),l.flexGrow=a.number(r.css("flex-grow")),t=null,r=null,s=null,l=null}jQuery(document.body).unbind("mousemove.ax5docker-"+e.instanceId).unbind("mouseup.ax5docker-"+e.instanceId).unbind("mouseleave.ax5docker-"+e.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},f=ax5.util.debounce(function(e){e()},t.animateTime),x=function(){f(function(){this.$target.find("[data-ax5docker-pane-tabs]").each(function(){var e=jQuery(this).parent();this.scrollWidth>this.clientWidth?e.addClass("tabs-scrolled"):e.removeClass("tabs-scrolled"),e=null})}.bind(e))},m=function(){var n={stack:function(e){if(!a.isArray(e.panels))return!1;var t={type:"stack",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=n[e.type](e);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},panel:function(e){return e},row:function(e){if(!a.isArray(e.panels))return!1;var t={type:"row",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=n[e.type](e);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)},column:function(e){if(!a.isArray(e.panels))return!1;var t={type:"column",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=n[e.type](e);r&&t.panels.push(r),r=null}}),0==t.panels.length?null:(t.panels.length<2&&(t=t.panels[0]),t)}};e.panels[0]?e.panels[0]=n[e.panels[0].type](e.panels[0]):e.panels=[],u()};this.init=function(e){return t=jQuery.extend(!0,{},t,e),t.target?(this.$target=jQuery(t.target),this.panels=t.panels||[],this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,this.onLoad=t.onLoad,this.onDataChanged=t.onDataChanged,ax5.ui.menu&&(this.menu=new ax5.ui.menu({theme:"default",position:"absolute",icons:{arrow:"â–¸"}})),void jQuery(window).bind("resize.ax5docker-"+this.id,function(){x()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(e){return this.panels=e||[],u(),this},this.addModule=function(e){return a.isObject(e)&&jQuery.extend(!0,this.modules,e),this},this.repaint=function(){return u(),this},this.addPanel=function(e,a,n,t){"undefined"==e&&(e="0"),e=e.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(e,a){return"panels["+e+"]"});var r=o(e);console.log(r);var s={stack:function(a,n,t){var r=jQuery.extend({},a),s={stack:function(e,a){e.panels.push(a),m()},"row-left":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(t),a.panels.push(r),m())},"row-right":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(r),a.panels.push(t),m())},"column-top":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"column"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(t),a.panels.push(r),m())},"column-bottom":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"column"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(r),a.panels.push(t),m())}};n in s&&s[n].call(this,a,t),r=null,s=null},row:function(a,n,t,r){var s=jQuery.extend({},a),l={stack:function(e,a){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,n,a)},"row-left":function(a,n,t){var r=e.substr(0,e.lastIndexOf(".")),l=o(r);"row"==l.type?(a.panels.splice(t,0,n),m()):(a=i(e,{type:"row",panels:[]}),a.panels.push(n),a.panels.push(s),m())},"row-right":function(a,n,t){var r=e.substr(0,e.lastIndexOf(".")),l=o(r);"row"==l.type?(a.panels.splice(t+1,0,n),m()):(a=i(e,{type:"row",panels:[]}),a.panels.push(s),a.panels.push(n),m())},"column-top":function(a,t,r){var l=e.substr(0,e.lastIndexOf(".")),d=o(l);"column"==d.type?this.addPanel(d.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(t),a.panels.push(s),m())},"column-bottom":function(a,t,r){var l=e.substr(0,e.lastIndexOf(".")),d=o(l);"column"==d.type?this.addPanel(d.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(s),a.panels.push(t),m())}};n in l&&l[n].call(this,a,t,r),l=null,s=null},column:function(a,n,t,r){var s=jQuery.extend({},a),l={stack:function(e,a){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,n,a)},"row-left":function(a,t){var r=e.substr(0,e.lastIndexOf(".")),l=o(r);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(t),a.panels.push(s),m())},"row-right":function(a,t){var r=e.substr(0,e.lastIndexOf(".")),l=o(r);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(s),a.panels.push(t),m())},"column-top":function(e,a){e.panels.splice(r,0,a),m()},"column-bottom":function(e,a){e.panels.splice(r+1,0,a),m()}};n in l&&l[n].call(this,a,t),l=null,s=null},panel:function(a,n,t){var r=jQuery.extend({},a),s={stack:function(a,n){a=i(e,{type:"stack",panels:[]}),a.panels.push(r),a.panels.push(n),m()},"row-left":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(t),a.panels.push(r),m())},"row-right":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"row"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"row",panels:[]}),a.panels.push(r),a.panels.push(t),m())},"column-top":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"column"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(t),a.panels.push(r),m())},"column-bottom":function(a,t){var s=e.substr(0,e.lastIndexOf(".")),l=o(s);"column"==l.type?this.addPanel(l.panelPath,n,t,a.panelIndex):(a=i(e,{type:"column",panels:[]}),a.panels.push(r),a.panels.push(t),m())}};n in s&&s[n].call(this,a,t),r=null,s=null}};return s[r.type].call(this,r,a,n,t),this},this.main=function(){arguments&&a.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}())}(),function(){var e=ax5.ui.docker,a=function(e){return" \n{{#panels}}\n{{#panels}}\n{{/panels}}\n{{^panels}}\n{{/panels}}\n{{/panels}}\n        "};e.tmpl={panels:a,get:function(a,n,t){return ax5.mustache.render(e.tmpl[a].call(this,t),n)}}}();
//# sourceMappingURL=ax5docker.min.js.map
