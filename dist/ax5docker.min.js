"use strict";!function(){var a=ax5.ui,n=ax5.util;a.addClass({className:"docker",version:"${VERSION}"},function(){var a=function(){var a=this,e=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{}},this.panels=[],this.panelId=0,this.modules={},e=this.config;var t=function(){return a.panelId++},i={init:function(a,n){a.$element.html(n.name)},active:function(a,n){},deactive:function(a,n){},destroy:function(a,n){}},o=function(a,n){var e=[];return a&&"undefined"!=typeof a.panelPath&&e.push(a.panelPath),e.push("panels["+(n||0)+"]"),e.join(".")},l=function(n){var e=[],t=[].concat(n.split(/[\.\[\]]/g));t.forEach(function(a){""!==a&&e.push('["'+a.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+e.join("")+";").call(a)}catch(i){return}},r=function(n,e){var t=[],i=[].concat(n.split(/[\.\[\]]/g));return i.forEach(function(a){""!==a&&t.push('["'+a.replace(/['\"]/g,"")+'"]')}),Function("val","this"+t.join("")+" = val;").call(a,e)},c=function(t,o){var l=jQuery.extend(t.moduleState,{name:t.name}),c={$element:t.$item},s=void 0,d={init:function(){t.builded=!0,s=t.moduleName in a.modules&&"init"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,s.init(c,l)},active:function(){t.active=!0,t.$label.addClass("active"),t.$item.addClass("active"),s=t.moduleName in a.modules&&"active"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,s.active(c,l)},deactive:function(){t.active=!1,t.$label.removeClass("active"),t.$item.removeClass("active"),s=t.moduleName in a.modules&&"deactive"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,s.deactive(c,l)},destroy:function(){s=t.moduleName in a.modules&&"destroy"in a.modules[t.moduleName]?a.modules[t.moduleName]:i,s.destroy(c,l),r(t.panelPath,null),p()}},u={panel:t,controlType:o},f=function(){d[o](),s=null,n.isFunction(e.control.after)&&e.control.after.call(u,u)};d[o]&&(n.isFunction(e.control.before)?e.control.before.call(u,u,function(){f()}):f())},s=function(){var i={stack:function(a,e,t,l){var r=void 0,c=-1;t.panelPath=o(e,l),r=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+t.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-item-views=""></div></div>'),a.append(r),n.isArray(t.panels)&&(t.panels.forEach(function(a,n){a.active&&(c=n)}),c===-1&&(c=0),t.panels[c].active=!0,t.panels.forEach(function(a,n){i[a.type](r,t,a,n)})),r=null,c=null},panel:function(a,n,i,l){var r=void 0;i.panelPath=o(n,l),i.$label=jQuery('<li data-ax5docker-pane-tab="'+l+'" data-ax5docker-path="'+i.panelPath+'"><div class="title">'+i.name+'</div><div class="close-icon">'+e.icons.close+"</div></li>"),i.$item||(i.$item=jQuery('<div data-ax5docker-pane-item="'+l+'" data-ax5docker-pane-id="'+t()+'" data-ax5docker-path="'+i.panelPath+'"></div>')),n&&"stack"==n.type?(i.active&&(i.builded||c(i,"init"),c(i,"active")),a.find("[data-ax5docker-pane-tabs]").append(i.$label),a.find("[data-ax5docker-pane-item-views]").append(i.$item)):(r=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+i.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-item-views=""></div></div>'),i.builded||c(i,"init"),c(i,"active"),r.find("[data-ax5docker-pane-tabs]").append(i.$label),r.find("[data-ax5docker-pane-item-views]").append(i.$item),a.append(r)),r=null},resizeHandel:function(a,n,e){var t=jQuery('<div data-ax5docker-resize-handle=""></div>');a.append(t),t=null},row:function(a,e,t,l){var r=void 0;if(t.panelPath=o(e,l),e&&"stack"==e.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";r=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+t.panelPath+'"></div>'),a.append(r),n.isArray(t.panels)&&t.panels.forEach(function(a,n){n>0&&i.resizeHandel(r,a,t,n),i[a.type](r,t,a,n)}),r=null},column:function(a,e,t,l){var r=void 0;if(t.panelPath=o(e,l),e&&"stack"==e.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";r=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+t.panelPath+'"></div>'),a.append(r),n.isArray(t.panels)&&t.panels.forEach(function(a,n){l>0&&i.resizeHandel(r,a,t,n),i[a.type](r,t,a,n)}),r=null}},l=jQuery('<div data-ax5docker-panes=""></div>');a.panels[0]&&i[a.panels[0].type](l,null,a.panels[0],0),a.$target.html(l),a.$target.off("click").on("click","[data-ax5docker-pane-tab] .close-icon",function(a){u($(this).parents("[data-ax5docker-pane-tab]")),n.stopEvent(a)}).on("click","[data-ax5docker-pane-tab]",function(a){d(this),n.stopEvent(a)}),l=null},d=function(n){var e=jQuery(n),t=e.parents("[data-ax5docker-pane]"),i=(e.attr("data-ax5docker-pane-tab"),l(t.attr("data-ax5docker-path"))),o=l(e.attr("data-ax5docker-path"));if(e.hasClass("active"))return!1;for(var r=0,s=i.panels.length;r<s;r++)i.panels[r].active&&c(i.panels[r],"deactive");return o.builded||c(o,"init"),c(o,"active"),a},u=function(n){var e=jQuery(n),t=e.attr("data-ax5docker-path"),i=l(t);return c(i,"destroy"),a},p=function(){var e={stack:function(a){if(!n.isArray(a.panels))return!1;var t={type:"stack",panels:[]};if(a.panels.forEach(function(a,n){a&&t.panels.push(a)}),t.panels.length<2&&(t=t.panels[0]),n.isArray(t.panels))for(var i=0,o=t.panels.length;i<o;i++)t.panels[i]=e[t.panels[i].type](t.panels[i]);return t},panel:function(a){return a},row:function(a){if(!n.isArray(a.panels))return!1;var t={type:"row",panels:[]};if(a.panels.forEach(function(a,n){a&&t.panels.push(a)}),t.panels.length<2&&(t=t.panels[0]),n.isArray(t.panels))for(var i=0,o=t.panels.length;i<o;i++)t.panels[i]=e[t.panels[i].type](t.panels[i]);return t},column:function(a){if(!n.isArray(a.panels))return!1;var t={type:"column",panels:[]};if(a.panels.forEach(function(a,n){a&&t.panels.push(a)}),t.panels.length<2&&(t=t.panels[0]),n.isArray(t.panels))for(var i=0,o=t.panels.length;i<o;i++)t.panels[i]=e[t.panels[i].type](t.panels[i]);return t}};a.panels[0]?a.panels[0]=e[a.panels[0].type](a.panels[0]):a.panels=[],s()};this.init=function(a){return e=jQuery.extend(!0,{},e,a),e.target?(this.$target=jQuery(e.target),this.panels=e.panels||[],this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,this.onLoad=e.onLoad,void(this.onDataChanged=e.onDataChanged)):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(a){return this.panels=a||[],s(),this},this.addModule=function(a){return n.isObject(a)&&jQuery.extend(!0,this.modules,a),this},this.repaint=function(){return s(),this},this.addPanel=function(a,n,e){"undefined"==a&&(a="0"),a=a.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(a,n){return"panels["+a+"]"});var t=l(a),i={stack:function(a,n,e){var t={stack:function(a,n){a.panels.push(n),p()},"row-left":function(a,n){},"row-right":function(a,n){},"column-top":function(a,n){},"column-bottom":function(a,n){}};n in t&&t[n].call(this,a,e)},row:function(a,n,e){var t={stack:function(a,e){a.panels[0]&&a.panels[0].panelPath&&this.addPanel(a.panels[0].panelPath,n,e)},"row-left":function(a,n){},"row-right":function(a,n){},"column-top":function(a,n){},"column-bottom":function(a,n){}};n in t&&t[n].call(this,a,e)},column:function(a,n,e){var t={stack:function(a,n){},"row-left":function(a,n){},"row-right":function(a,n){},"column-top":function(a,n){},"column-bottom":function(a,n){}};n in t&&t[n].call(this,a,e)},panel:function(a,n,e){var t={stack:function(a,n){},"row-left":function(a,n){},"row-right":function(a,n){},"column-top":function(a,n){},"column-bottom":function(a,n){}};n in t&&t[n].call(this,a,e)}};return i[t.type].call(this,t,n,e),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return a}())}(),function(){var a=ax5.ui.docker,n=function(a){return" \n{{#panels}}\n{{#panels}}\n{{/panels}}\n{{^panels}}\n{{/panels}}\n{{/panels}}\n        "};a.tmpl={panels:n,get:function(n,e,t){return ax5.mustache.render(a.tmpl[n].call(this,t),e)}}}();
//# sourceMappingURL=ax5docker.min.js.map
