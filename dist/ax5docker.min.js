"use strict";!function(){var n=ax5.ui,a=ax5.util;n.addClass({className:"docker",version:"${VERSION}"},function(){var n=function(){var n=this,e=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."}},this.panels=[],this.panelId=0,this.modules={},e=this.config;var t=function(){return n.panelId++},l={init:function(n,a){n.$element.html(a.name)},active:function(n,a){},deactive:function(n,a){},destroy:function(n,a){}},i=function(n,a){var e=[];return n&&"undefined"!=typeof n.panelPath&&e.push(n.panelPath),e.push("panels["+(a||0)+"]"),e.join(".")},o=function(a){var e=[],t=[].concat(a.split(/[\.\[\]]/g));t.forEach(function(n){""!==n&&e.push('["'+n.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+e.join("")+";").call(n)}catch(l){return}},s=function(a,e){var t=[],l=[].concat(a.split(/[\.\[\]]/g));return l.forEach(function(n){""!==n&&t.push('["'+n.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+t.join("")+" = val;").call(n,e)},c=function(t,i){var o=jQuery.extend(t.moduleState,{name:t.name}),c={$element:t.$item},p=void 0,r={init:function(){t.builded=!0,p=t.moduleName in n.modules&&"init"in n.modules[t.moduleName]?n.modules[t.moduleName]:l,p.init(c,o)},active:function(){t.active=!0,t.$label.addClass("active"),t.$item.addClass("active"),p=t.moduleName in n.modules&&"active"in n.modules[t.moduleName]?n.modules[t.moduleName]:l,p.active(c,o)},deactive:function(){t.active=!1,t.$label.removeClass("active"),t.$item.removeClass("active"),p=t.moduleName in n.modules&&"deactive"in n.modules[t.moduleName]?n.modules[t.moduleName]:l,p.deactive(c,o)},destroy:function(){p=t.moduleName in n.modules&&"destroy"in n.modules[t.moduleName]?n.modules[t.moduleName]:l,p.destroy(c,o),s(t.panelPath,null),f()}},u={panel:t,controlType:i},d=function(){r[i](),p=null,a.isFunction(e.control.after)&&e.control.after.call(u,u)};r[i]&&(a.isFunction(e.control.before)?e.control.before.call(u,u,function(){d()}):d())},p=function(){var l={stack:function(n,t,o,s){var c=void 0,p=-1;o.panelPath=i(t,s),c=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+o.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-aside="">'+e.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),n.append(c),a.isArray(o.panels)&&(o.panels.forEach(function(n,a){n.active&&(p=a)}),p===-1&&(p=0),o.panels[p].active=!0,o.panels.forEach(function(n,a){l[n.type](c,o,n,a)})),c=null,p=null},panel:function(n,a,l,o){var s=void 0;l.panelPath=i(a,o),l.$label=jQuery('<li data-ax5docker-pane-tab="'+o+'" data-ax5docker-path="'+l.panelPath+'"><div class="title">'+l.name+'</div><div class="close-icon">'+e.icons.close+"</div></li>"),l.$item||(l.$item=jQuery('<div data-ax5docker-pane-item="'+o+'" data-ax5docker-pane-id="'+t()+'" data-ax5docker-path="'+l.panelPath+'"></div>')),a&&"stack"==a.type?(l.active&&(l.builded||c(l,"init"),c(l,"active")),n.find("[data-ax5docker-pane-tabs]").append(l.$label),n.find("[data-ax5docker-pane-item-views]").append(l.$item)):(s=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+l.panelPath+'"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-aside="">'+e.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),l.builded||c(l,"init"),c(l,"active"),s.find("[data-ax5docker-pane-tabs]").append(l.$label),s.find("[data-ax5docker-pane-item-views]").append(l.$item),n.append(s)),s=null},resizeHandle:function(n,a,e){var t=jQuery('<div data-ax5docker-resize-handle=""></div>');n.append(t),t=null},row:function(n,e,t,o){var s=void 0;if(t.panelPath=i(e,o),e&&"stack"==e.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";s=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+t.panelPath+'"></div>'),n.append(s),a.isArray(t.panels)&&t.panels.forEach(function(n,a){a>0&&l.resizeHandle(s,n,t,a),l[n.type](s,t,n,a)}),s=null},column:function(n,e,t,o){var s=void 0;if(t.panelPath=i(e,o),e&&"stack"==e.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";s=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+t.panelPath+'"></div>'),n.append(s),a.isArray(t.panels)&&t.panels.forEach(function(n,a){o>0&&l.resizeHandle(s,n,t,a),l[n.type](s,t,n,a)}),s=null}},o=jQuery('<div data-ax5docker-panes=""></div>');n.panels[0]&&l[n.panels[0].type](o,null,n.panels[0],0),n.$target.html(o),n.$target.off("click").on("click","[data-ax5docker-pane-tab] .close-icon",function(n){u($(this).parents("[data-ax5docker-pane-tab]")),a.stopEvent(n)}).on("click","[data-ax5docker-pane-tab]",function(n){r(this),a.stopEvent(n)}),h(),o=null},r=function(a){var e=jQuery(a),t=e.parents("[data-ax5docker-pane]"),l=(e.attr("data-ax5docker-pane-tab"),o(t.attr("data-ax5docker-path"))),i=o(e.attr("data-ax5docker-path"));if(e.hasClass("active"))return!1;for(var s=0,p=l.panels.length;s<p;s++)l.panels[s].active&&c(l.panels[s],"deactive");return i.builded||c(i,"init"),c(i,"active"),n},u=function(a){var e=jQuery(a),t=e.attr("data-ax5docker-path"),l=o(t);return c(l,"destroy"),n},d=ax5.util.debounce(function(n){n()},e.animateTime),h=function(){d(function(){this.$target.find("[data-ax5docker-pane-tabs]").each(function(){var n=jQuery(this).parent();this.scrollWidth>this.clientWidth?n.addClass("tabs-scrolled"):n.removeClass("tabs-scrolled"),n=null})}.bind(n))},f=function(){var e={stack:function(n){if(!a.isArray(n.panels))return!1;var t={type:"stack",panels:[]};if(n.panels.forEach(function(n,a){n&&t.panels.push(n)}),t.panels.length<2&&(t=t.panels[0]),a.isArray(t.panels))for(var l=0,i=t.panels.length;l<i;l++)t.panels[l]=e[t.panels[l].type](t.panels[l]);return t},panel:function(n){return n},row:function(n){if(!a.isArray(n.panels))return!1;var t={type:"row",panels:[]};if(n.panels.forEach(function(n,a){n&&t.panels.push(n)}),t.panels.length<2&&(t=t.panels[0]),a.isArray(t.panels))for(var l=0,i=t.panels.length;l<i;l++)t.panels[l]=e[t.panels[l].type](t.panels[l]);return t},column:function(n){if(!a.isArray(n.panels))return!1;var t={type:"column",panels:[]};if(n.panels.forEach(function(n,a){n&&t.panels.push(n)}),t.panels.length<2&&(t=t.panels[0]),a.isArray(t.panels))for(var l=0,i=t.panels.length;l<i;l++)t.panels[l]=e[t.panels[l].type](t.panels[l]);return t}};n.panels[0]?n.panels[0]=e[n.panels[0].type](n.panels[0]):n.panels=[],p()};this.init=function(n){return e=jQuery.extend(!0,{},e,n),e.target?(this.$target=jQuery(e.target),this.panels=e.panels||[],this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,this.onLoad=e.onLoad,this.onDataChanged=e.onDataChanged,void jQuery(window).bind("resize.ax5docker-"+this.id,function(){h()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(n){return this.panels=n||[],p(),this},this.addModule=function(n){return a.isObject(n)&&jQuery.extend(!0,this.modules,n),this},this.repaint=function(){return p(),this},this.addPanel=function(n,a,e){"undefined"==n&&(n="0"),n=n.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(n,a){return"panels["+n+"]"});var t=o(n),l={stack:function(a,e,t){var l=jQuery.extend({},a),i={stack:function(n,a){n.panels.push(a)},"row-left":function(a,e){a=s(n,{type:"row",panels:[]}),a.panels.push(e),a.panels.push(l)},"row-right":function(a,e){a=s(n,{type:"row",panels:[]}),a.panels.push(l),a.panels.push(e)},"column-top":function(a,e){a=s(n,{type:"column",panels:[]}),a.panels.push(e),a.panels.push(l)},"column-bottom":function(a,e){a=s(n,{type:"column",panels:[]}),a.panels.push(l),a.panels.push(e)}};e in i&&(i[e].call(this,a,t),f()),l=null,i=null},row:function(n,a,e){var t={stack:function(n,e){n.panels[0]&&n.panels[0].panelPath&&this.addPanel(n.panels[0].panelPath,a,e)},"row-left":function(n,a){n.panels=[].concat(a).concat(n.panels),f()},"row-right":function(n,a){n.panels.push(a),f()},"column-top":function(n,a){n.panels=[].concat({type:"column",panels:[a]}).concat(n.panels),f()},"column-bottom":function(n,a){n.panels.push({type:"column",panels:[a]}),f()}};a in t&&t[a].call(this,n,e),t=null},column:function(n,a,e){var t={stack:function(n,a){n.panels=[].concat({type:"stack",panels:[a]}).concat(n.panels),f()},"row-left":function(n,a){n.panels=[].concat({type:"row",panels:[a]}).concat(n.panels),f()},"row-right":function(n,a){n.panels.push({type:"row",panels:[a]}),f()},"column-top":function(n,a){n.panels=[].concat(a).concat(n.panels),f()},"column-bottom":function(n,a){n.panels.push(a),f()}};a in t&&t[a].call(this,n,e),t=null},panel:function(a,e,t){var l=jQuery.extend({},a),i={stack:function(a,e){a=s(n,{type:"stack",panels:[]}),a.panels.push(l),a.panels.push(e)},"row-left":function(a,e){a=s(n,{type:"row",panels:[]}),a.panels.push(e),a.panels.push(l)},"row-right":function(a,e){a=s(n,{type:"row",panels:[]}),a.panels.push(l),a.panels.push(e)},"column-top":function(a,e){a=s(n,{type:"column",panels:[]}),a.panels.push(e),a.panels.push(l)},"column-bottom":function(a,e){a=s(n,{type:"column",panels:[]}),a.panels.push(e),a.panels.push(l)}};e in i&&(i[e].call(this,a,t),f()),l=null,i=null}};return console.log(t),l[t.type].call(this,t,a,e),this},this.main=function(){arguments&&a.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}())}(),function(){var n=ax5.ui.docker,a=function(n){return" \n{{#panels}}\n{{#panels}}\n{{/panels}}\n{{^panels}}\n{{/panels}}\n{{/panels}}\n        "};n.tmpl={panels:a,get:function(a,e,t){return ax5.mustache.render(n.tmpl[a].call(this,t),e)}}}();
//# sourceMappingURL=ax5docker.min.js.map
