"use strict";!function(){var e=ax5.ui,a=ax5.util;e.addClass({className:"docker",version:"1.3.105"},function(){var e=function(){var e=this,t=this,n=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."}},this.xvar={},this.menu=null,this.panels=[],this.panelId=0,this.modules={},n=this.config;var r=function(){return e.panelId++},l={init:function(e,a){e.$element.html(a.name)},active:function(e,a){},deactive:function(e,a){},destroy:function(e,a){}},o=function(e,a){var t=[];return e&&"undefined"!=typeof e.panelPath&&t.push(e.panelPath),t.push("panels["+(a||0)+"]"),t.join(".")},i=function(t){var n=[],r=a.isArray(t)?[].concat(t):[].concat(t.split(/[\.\[\]]/g));r.forEach(function(e){""!==e&&n.push('["'+e.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+n.join("")+";").call(e)}catch(l){return}},s=function(a){var t=a.panelPath.substr(0,a.panelPath.lastIndexOf("."));try{return Function("","return this."+t+";").call(e)}catch(n){return void console.log(n)}},d=function(t,n){var r=[],l=a.isArray(t)?[].concat(t):[].concat(t.split(/[\.\[\]]/g));return l.forEach(function(e){""!==e&&r.push('["'+e.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+r.join("")+" = val;").call(e,n)},p=function(e){var a=void 0,t=e.originalEvent?e.originalEvent:e;return a="changedTouches"in t?t.changedTouches[0]:t,{clientX:a.pageX,clientY:a.pageY}},c=function(t,r){var o=jQuery.extend(t.moduleState,{name:t.name}),i={$element:t.$item},s=void 0,p={init:function(){t.builded=!0,s=t.moduleName in e.modules&&"init"in e.modules[t.moduleName]?e.modules[t.moduleName]:l,s.init(i,o)},active:function(){t.active=!0,t.$label.addClass("active"),t.$item.addClass("active");var a=t.$label.parent();a.get(0)&&a.get(0).clientWidth!==a.get(0).scrollWidth&&a.animate({scrollLeft:t.$label.position().left},300),s=t.moduleName in e.modules&&"active"in e.modules[t.moduleName]?e.modules[t.moduleName]:l,s.active(i,o),a=null},deactive:function(){t.active=!1,t.$label.removeClass("active"),t.$item.removeClass("active"),s=t.moduleName in e.modules&&"deactive"in e.modules[t.moduleName]?e.modules[t.moduleName]:l,s.deactive(i,o)},destroy:function(){s=t.moduleName in e.modules&&"destroy"in e.modules[t.moduleName]?e.modules[t.moduleName]:l,s.destroy(i,o),d(t.panelPath,null),k()}},c={panel:t,controlType:r},u=function(){p[r](),s=null,a.isFunction(n.control.after)&&n.control.after.call(c,c)};p[r]&&(a.isFunction(n.control.before)?n.control.before.call(c,c,function(){u()}):u())},u=function(){var l={stack:function(e,t,r,i){var s=void 0,d=-1;r.panelPath=o(t,i),s=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+r.panelPath+'" style="flex-grow: '+(r.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-more="">'+n.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),e.append(s),a.isArray(r.panels)&&(r.panels.forEach(function(e,a){e.active&&(d=a)}),d===-1&&(d=0),r.panels[d].active=!0,r.panels.forEach(function(e,a){e.panelIndex=a,l[e.type](s,r,e,a)})),s=null,d=null},panel:function(e,a,t,l){var i=void 0;t.panelPath=o(a,l),t.$label=jQuery('<li data-ax5docker-pane-tab="'+l+'" data-ax5docker-path="'+t.panelPath+'"><div class="title">'+t.name+'</div><div class="close-icon">'+n.icons.close+"</div></li>"),t.$item||(t.$item=jQuery('<div data-ax5docker-pane-item="'+l+'" data-ax5docker-pane-id="'+r()+'" data-ax5docker-path="'+t.panelPath+'"></div>')),a&&"stack"==a.type?(t.active&&(t.builded||c(t,"init"),c(t,"active")),e.find("[data-ax5docker-pane-tabs]").append(t.$label),e.find("[data-ax5docker-pane-item-views]").append(t.$item)):(i=jQuery('<div data-ax5docker-pane="" data-ax5docker-path="'+t.panelPath+'" style="flex-grow: '+(t.flexGrow||1)+';"><ul data-ax5docker-pane-tabs=""></ul><div data-ax5docker-pane-tabs-more="">'+n.icons.more+'</div><div data-ax5docker-pane-item-views=""></div></div>'),t.builded||c(t,"init"),c(t,"active"),i.find("[data-ax5docker-pane-tabs]").append(t.$label),i.find("[data-ax5docker-pane-item-views]").append(t.$item),e.append(i)),i=null},resizeHandle:function(e,a,t,n){var r=jQuery('<div data-ax5docker-resize-handle="'+a.type+"/"+a.panelPath+"/"+n+'"></div>');e.append(r),r=null},row:function(e,t,n,r){var i=void 0;if(n.panelPath=o(t,r),t&&"stack"==t.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";i=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-path="'+n.panelPath+'" style="flex-grow: '+(n.flexGrow||1)+';"></div>'),e.append(i),a.isArray(n.panels)&&n.panels.forEach(function(e,a){a>0&&l.resizeHandle(i,n,e,a),e.panelIndex=a,l[e.type](i,n,e,a)}),i=null},column:function(e,t,n,r){var i=void 0;if(n.panelPath=o(t,r),t&&"stack"==t.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";i=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-path="'+n.panelPath+'" style="flex-grow: '+(n.flexGrow||1)+';"></div>'),e.append(i),a.isArray(n.panels)&&n.panels.forEach(function(e,a){a>0&&l.resizeHandle(i,n,e,a),e.panelIndex=a,l[e.type](i,n,e,a)}),i=null}},s=jQuery('<div data-ax5docker-panes=""></div>');e.panels[0]&&l[e.panels[0].type](s,null,e.panels[0],0),e.$target.html(s),e.$target.off("click.ax5docker-pane").on("click.ax5docker-pane","[data-ax5docker-pane-tab] .close-icon",function(e){v($(this).parents("[data-ax5docker-pane-tab]")),a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tab]",function(e){var t=jQuery(this),n=i(t.parents("[data-ax5docker-pane]").attr("data-ax5docker-path")),r=t.attr("data-ax5docker-pane-tab");t.hasClass("active")||f(n,r),t=null,n=null,r=null,a.stopEvent(e)}).on("click.ax5docker-pane","[data-ax5docker-pane-tabs-more]",function(e){h($(this).parents("[data-ax5docker-pane]"),e),a.stopEvent(e)}),e.$target.off("mousedown.ax5docker-pane-resize").off("dragstart.ax5docker-pane-resize").on("dragstart.ax5docker-pane-resize","[data-ax5docker-pane-tab]",function(e){m.on(this)}).on("mousedown.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){var n=this.getAttribute("data-ax5docker-resize-handle").split(/\//g);t.xvar.mousePosition=p(e),t.xvar.resizerType=n[0],t.xvar.resizerPath=n[1],t.xvar.resizerIndex=n[2],t.xvar.resizer$dom=$(this),t.xvar.resizerParent$dom=t.xvar.resizer$dom.parent(),t.xvar.resizerPrevGrow=a.number(t.xvar.resizer$dom.prev().css("flex-grow")),t.xvar.resizerNextGrow=a.number(t.xvar.resizer$dom.next().css("flex-grow")),"row"==t.xvar.resizerType?t.xvar.resizerCanvasWidth=t.xvar.resizer$dom.prev().innerWidth()+t.xvar.resizer$dom.next().innerWidth()+t.xvar.resizer$dom.width():t.xvar.resizerCanvasHeight=t.xvar.resizer$dom.prev().innerHeight()+t.xvar.resizer$dom.next().innerHeight()+t.xvar.resizer$dom.height(),x.on(this),a.stopEvent(e)}).on("dragstart.ax5docker-pane-resize","[data-ax5docker-resize-handle]",function(e){return a.stopEvent(e),!1}),y(),s=null},f=function(a,t){for(var n=a.panels[t],r=0,l=a.panels.length;r<l;r++)a.panels[r].active&&c(a.panels[r],"deactive");return n.builded||c(n,"init"),c(n,"active"),a=null,t=null,n=null,e},v=function(a){var t=jQuery(a),n=t.attr("data-ax5docker-path"),r=i(n);return c(r,"destroy"),t=null,n=null,r=null,e},h=function(t,n){var r=jQuery(t),l=r.attr("data-ax5docker-path"),o=i(l);if(!e.menu)throw console.log(o.panels),"'ax5ui-menu' is required to implement the function.";var s=a.map(o.panels,function(e){return{label:this.name,index:e,panePath:l}});return e.menu.setConfig({items:s,onClick:function(){f(i(this.panePath),this.index)}}),e.menu.popup(n),r=null,l=null,o=null,e},x={on:function(n){var r=$(n);r.offset().left,e.$target.offset().left;jQuery(document.body).on("mousemove.ax5docker-"+e.instanceId,function(e){var n=p(e),r=void 0;t.xvar.resizerLived?"row"==t.xvar.resizerType?(t.xvar.__da=n.clientX-t.xvar.mousePosition.clientX,r=a.number(2*t.xvar.__da/t.xvar.resizerCanvasWidth,{round:6}),t.xvar.resizer$dom.prev().css({"flex-grow":t.xvar.resizerPrevGrow+r}),t.xvar.resizer$dom.next().css({"flex-grow":t.xvar.resizerNextGrow-r})):(t.xvar.__da=n.clientY-t.xvar.mousePosition.clientY,r=a.number(2*t.xvar.__da/t.xvar.resizerCanvasHeight,{round:6}),t.xvar.resizer$dom.prev().css({"flex-grow":t.xvar.resizerPrevGrow+r}),t.xvar.resizer$dom.next().css({"flex-grow":t.xvar.resizerNextGrow-r})):t.xvar.resizerLived=!0,n=null,r=null}).on("mouseup.ax5docker-"+e.instanceId,function(e){x.off(),a.stopEvent(e)}).on("mouseleave.ax5docker-"+e.instanceId,function(e){x.off(),a.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){if(t.xvar.resizerLived=!1,"undefined"==typeof e.xvar.__da);else{var n=t.xvar.resizer$dom.prev(),r=t.xvar.resizer$dom.next(),l=i(n.attr("data-ax5docker-path")),o=i(r.attr("data-ax5docker-path"));l.flexGrow=a.number(n.css("flex-grow")),o.flexGrow=a.number(r.css("flex-grow")),n=null,r=null,l=null,o=null}jQuery(document.body).off("mousemove.ax5docker-"+e.instanceId).off("mouseup.ax5docker-"+e.instanceId).off("mouseleave.ax5docker-"+e.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},m={on:function(){e.panels[0]&&e.panels[0].panels&&e.panels[0].panels.length&&(e.xvar.dragger={target:null,dragOverVertical:null,dragOverHorizontal:null},e.$target.on("dragover.ax5docker-"+e.instanceId,"[data-ax5docker-path]",function(e){m.dragover(this,e),a.stopEvent(e)}).on("drop.ax5docker-"+e.instanceId,function(e){m.off("drop"),a.stopEvent(e)}).on("dragend.ax5docker-"+e.instanceId,function(e){m.off(),a.stopEvent(e)}))},dragover:function(a,t){var n=jQuery(a);null!=e.xvar.dragger.target&&e.xvar.dragger.target.get(0)==n.get(0)||(e.xvar.dragger.target&&e.xvar.dragger.target.removeAttr("data-dropper"),e.xvar.dragger.target=n,e.xvar.dragger.dragOverVertical=null,e.xvar.dragger.dragOverHorizontal=null);var r={};r=n.offset(),r.width=n.width(),r.height=n.height();var l=p(t),o=void 0,i=void 0;if(n.attr("data-ax5docker-pane-tab")){var s=r.width/2;if(r.left<=l.clientX&&r.left+s>=l.clientX?i="left":r.left+s<=l.clientX&&r.left+2*s>=l.clientX&&(i="right"),e.xvar.dragger.dragOverHorizontal!=i&&"undefined"!=typeof i){e.xvar.dragger.dragOverHorizontal=i;var d={left:function(e){e.attr("data-dropper","left")},right:function(e){e.attr("data-dropper","right")}};d[e.xvar.dragger.dragOverHorizontal](e.xvar.dragger.target)}}else if(n.attr("data-ax5docker-pane-item")){var c=r.height/3,u=r.width/3;if(r.top<=l.clientY&&r.top+c>=l.clientY?o="top":r.top+c<=l.clientY&&r.top+2*c>=l.clientY?o="middle":r.top+2*c<=l.clientY&&r.top+3*c>=l.clientY&&(o="bottom"),r.left<=l.clientX&&r.left+u>=l.clientX?i="left":r.left+u<=l.clientX&&r.left+2*u>=l.clientX?i="center":r.left+2*u<=l.clientX&&r.left+3*u>=l.clientX&&(i="right"),e.xvar.dragger.dragOverVertical!=o||e.xvar.dragger.dragOverHorizontal!=i){e.xvar.dragger.dragOverVertical=o,e.xvar.dragger.dragOverHorizontal=i;var d={"left-top":function(e){e.attr("data-dropper","left")},"right-top":function(e){e.attr("data-dropper","right")},"center-top":function(e){e.attr("data-dropper","top")},"left-middle":function(e){e.attr("data-dropper","left")},"right-middle":function(e){e.attr("data-dropper","right")},"center-middle":function(e){e.attr("data-dropper","center")},"left-bottom":function(e){e.attr("data-dropper","left")},"right-bottom":function(e){e.attr("data-dropper","right")},"center-bottom":function(e){e.attr("data-dropper","bottom")}};d[e.xvar.dragger.dragOverHorizontal+"-"+e.xvar.dragger.dragOverVertical](e.xvar.dragger.target)}}},off:function(a){a&&console.log(e.xvar.dragger),e.$target.off("dragover.ax5docker-"+e.instanceId).off("drop.ax5docker-"+e.instanceId).off("dragend.ax5docker-"+e.instanceId),e.xvar.dragger.target.removeAttr("data-dropper")}},g=ax5.util.debounce(function(e){e()},n.animateTime),y=function(){g(function(){this.$target.find("[data-ax5docker-pane-tabs]").each(function(){var e=jQuery(this).parent();this.scrollWidth>this.clientWidth?e.addClass("tabs-scrolled"):e.removeClass("tabs-scrolled"),e=null})}.bind(e))},k=function(){var t={stack:function(e){if(!a.isArray(e.panels))return!1;var n={type:"stack",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=t[e.type](e);r&&n.panels.push(r),r=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)},panel:function(e){return e},row:function(e){if(!a.isArray(e.panels))return!1;var n={type:"row",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=t[e.type](e);r&&n.panels.push(r),r=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)},column:function(e){if(!a.isArray(e.panels))return!1;var n={type:"column",panels:[]};return e.panels.forEach(function(e,a){if(e){var r=t[e.type](e);r&&n.panels.push(r),r=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)}};e.panels[0]?e.panels[0]=t[e.panels[0].type](e.panels[0]):e.panels=[],u()};this.init=function(e){return n=jQuery.extend(!0,{},n,e),n.target?(this.$target=jQuery(n.target),this.panels=n.panels||[],this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onLoad=n.onLoad,this.onDataChanged=n.onDataChanged,ax5.ui.menu&&(this.menu=new ax5.ui.menu({theme:"default",position:"absolute",icons:{arrow:"▸"}})),void jQuery(window).bind("resize.ax5docker-"+this.id,function(){y()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(e){return this.panels=e||[],u(),this},this.addModule=function(e){return a.isObject(e)&&jQuery.extend(!0,this.modules,e),this},this.repaint=function(){return u(),this},this.addPanel=function(e,a,t,n){var r="";"undefined"==e&&(r="0"),r=e.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(e,a){return"panels["+e+"]"});var l=i(r),o=s(l);"stack"==o.type&&(l=o,r=l.panelPath);var p={stack:function(e,a,t){var n=jQuery.extend({},e),l={stack:function(e,a){e.panels.push(a),k()},"row-left":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(t),e.panels.push(n),k())},"row-right":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(n),e.panels.push(t),k())},"column-top":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(t),e.panels.push(n),k())},"column-bottom":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(n),e.panels.push(t),k())}};a in l&&l[a].call(this,e,t),n=null,l=null},row:function(e,a,t,n){var l=jQuery.extend({},e),o={stack:function(e,t){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,t)},"row-left":function(e,a,t){var n=r.substr(0,r.lastIndexOf(".")),o=i(n);o&&"row"==o.type?(e.panels.splice(t,0,a),k()):(e=d(r,{type:"row",panels:[]}),e.panels.push(a),e.panels.push(l),k())},"row-right":function(e,a,t){var n=r.substr(0,r.lastIndexOf(".")),o=i(n);o&&"row"==o.type?(e.panels.splice(t+1,0,a),k()):(e=d(r,{type:"row",panels:[]}),e.panels.push(l),e.panels.push(a),k())},"column-top":function(e,t,n){var o=r.substr(0,r.lastIndexOf(".")),s=i(o);s&&"column"==s.type?this.addPanel(s.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(t),e.panels.push(l),k())},"column-bottom":function(e,t,n){var o=r.substr(0,r.lastIndexOf(".")),s=i(o);s&&"column"==s.type?this.addPanel(s.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(l),e.panels.push(t),k())}};a in o&&o[a].call(this,e,t,n),o=null,l=null},column:function(e,a,t,n){var l=jQuery.extend({},e),o={stack:function(e,t){e.panels[0]&&e.panels[0].panelPath&&this.addPanel(e.panels[0].panelPath,a,t)},"row-left":function(e,t){var n=r.substr(0,r.lastIndexOf(".")),o=i(n);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(t),e.panels.push(l),k())},"row-right":function(e,t){var n=r.substr(0,r.lastIndexOf(".")),o=i(n);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(l),e.panels.push(t),k())},"column-top":function(e,a){e.panels.splice(n,0,a),k()},"column-bottom":function(e,a){e.panels.splice(n+1,0,a),k()}};a in o&&o[a].call(this,e,t),o=null,l=null},panel:function(e,a,t){var n=jQuery.extend({},e),l={stack:function(e,a){e=d(r,{type:"stack",panels:[]}),e.panels.push(n),e.panels.push(a),k()},"row-left":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(t),e.panels.push(n),k())},"row-right":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"row"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"row",panels:[]}),e.panels.push(n),e.panels.push(t),k())},"column-top":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(t),e.panels.push(n),k())},"column-bottom":function(e,t){var l=r.substr(0,r.lastIndexOf(".")),o=i(l);o&&"column"==o.type?this.addPanel(o.panelPath,a,t,e.panelIndex):(e=d(r,{type:"column",panels:[]}),e.panels.push(n),e.panels.push(t),k())}};a in l&&l[a].call(this,e,t),n=null,l=null}};return p[l.type].call(this,l,a,t,n),this},this.movePanel=function(e,a,t){return this},this.main=function(){arguments&&a.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}())}(),function(){var e=ax5.ui.docker;e.tmpl={get:function(a,t,n){return ax5.mustache.render(e.tmpl[a].call(this,n),t)}}}();