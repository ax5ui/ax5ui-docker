<!DOCTYPE html>
<!--
  ~ Copyright (c) 2017. tom@axisj.com
  ~ - github.com/thomasjang
  ~ - www.axisj.com
  -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../ax5ui-dialog/dist/ax5dialog.css"/>
    <link rel="stylesheet" type="text/css" href="../dist/ax5docker.css"/>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/jquery-direct/dist/jquery-direct.js"></script>
    <script src="../../ax5core/dist/ax5core.js"></script>
    <script src="../../ax5ui-docker/dist/ax5docker.js"></script>
    <script src="../dist/ax5docker.js"></script>

    <style>
        html, body {
            height: 100%;
        }

        body * {
            font-size: 11px;
        }
    </style>
</head>
<body style="padding: 10px;">

<div data-ax5docker="docker1" style="height: 80%;background: #dddddd;"></div>

<div style="padding: 5px;">
    <button class="btn btn-default" data-docker-control="add-panel-0">add Panel(0)</button>
    <button class="btn btn-default" data-docker-control="add-panel-0-0">add Panel(0.0)</button>
    <button class="btn btn-default" data-docker-control="add-panel-0-0-0">add Panel(0.0.0)</button>
</div>

<script>
    var myDocker = new ax5.ui.docker();

    $(function () {

        myDocker.setConfig({
            target: $('[data-ax5docker="docker1"]'),
            icons: {
                close: '<i class="fa fa-times" aria-hidden="true"></i>'
            },
            panels: [
                {
                    type: "row", // type : row, column, stack
                    panels: [
                        {
                            type: "stack",
                            panels: [
                                {
                                    type: "panel",
                                    name: "my name 1",
                                    moduleName: "content",
                                    moduleState: {
                                        data1: "data1"
                                    }
                                },
                                {
                                    type: "panel",
                                    name: "my name 2",
                                    moduleName: "content",
                                    moduleState: {
                                        data1: "data1"
                                    }
                                }
                            ]
                        },
                        {
                            type: "panel",
                            name: "my name 3",
                            moduleName: "content",
                            moduleState: {
                                data1: "data2"
                            }
                        }
                    ]
                }
            ],
            control: {
                before: function (that, callback) {
                    if (that.controlType === "destroy") {
                        if (confirm("정말 삭제 할까요?")) {
                            setTimeout(function () {
                                callback();
                            }, 300);

                            return;
                        }
                    } else {
                        callback();
                        return;
                    }
                }
            }
        });

        myDocker.addModule({
            "content": {
                init: function (container, state) {
                    container["$element"].html(JSON.stringify(state));
                    console.log(state, "init");
                },
                active: function (container, state) {
                    console.log(state, "active");
                },
                deactive: function (container, state) {
                    console.log(state, "deactive");
                },
                destroy: function (container, state) {
                    console.log(state, "destroy");
                }
            }
        });

        myDocker.repaint();

        $('[data-docker-control]').click(function () {
            switch (this.getAttribute("data-docker-control")) {
                case "add-panel-0":
                    myDocker.addPanel("0", "right", {
                        type: "panel",
                        name: "my name add",
                        moduleName: "content",
                        moduleState: {
                            data1: "data add"
                        }
                    });
                    break;
                case "add-panel-0-0":
                    myDocker.addPanel("0.0", "right", {
                        type: "panel",
                        name: "my name add",
                        moduleName: "content",
                        moduleState: {
                            data1: "data add"
                        }
                    });
                    break;
                case "add-panel-0-0-0":
                    myDocker.addPanel("0.0.0", "right", {
                        type: "panel",
                        name: "my name add",
                        moduleName: "content",
                        moduleState: {
                            data1: "data add"
                        }
                    });
                    break;
            }
        });
    });
</script>

</body>
</html>